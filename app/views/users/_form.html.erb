<%= form_for(@user, url: yield(:form_url) ) do |f| %>

  <%= render 'layouts/error_messages', object: f.object %>

  <%= f.label ":name", "User Name" %>
  <%= f.text_field :name, class: 'form-control' %>

  <%= f.label :avatar_data, "Avatar" %>
  <%= f.hidden_field :avatar, value: @user.cached_avatar_data %>
  <%= f.file_field :avatar %>

  <%= f.submit yield(:button_text), class: "btn" %>
<% end %>
